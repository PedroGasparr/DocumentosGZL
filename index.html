<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Documentos</title>
    <link rel="icon" href="img/f27651e8-0a8d-4460-b434-cc8e02929b8d.jpg">
    <!-- Link para Font Awesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Link para Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #364888; /* Azul escuro da logo */
            --secondary-color: #ebd53a; /* Amarelo da logo */
            --accent-color: #e74c3c; /* Vermelho para ações negativas */
            --light-color: #f8f9fa; /* Cinza bem claro */
            --dark-color: #212529; /* Preto suave */
            --text-color: #495057; /* Cinza escuro para texto */
            --text-light: #fff; /* Texto claro para fundos escuros */
            --border-radius: 8px;
            --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); /* Sombra mais suave */
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%); /* Gradiente azul claro */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* Tipografia */
        h1, h2, h3, h4 {
            color: var(--dark-color);
            font-weight: 700;
        }
        h1 { font-size: clamp(2rem, 4vw, 3rem); margin-bottom: 1.5rem;}
        h2 { font-size: clamp(1.7rem, 3.5vw, 2.4rem); margin-bottom: 2rem; color: var(--primary-color); border-bottom: 3px solid var(--secondary-color); padding-bottom: 0.75rem; display: flex; align-items: center; gap: 0.75rem;}
        h3 { font-size: clamp(1.4rem, 3vw, 1.9rem); color: var(--dark-color); margin-bottom: 1.2rem; display: flex; align-items: center; gap: 0.5rem;}
        h4 { font-size: clamp(1.2rem, 2.5vw, 1.6rem); color: var(--primary-color); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;}
        p, label, input, button, select, textarea { font-size: 1rem; }

        /* Layout Principal */
        .container {
            display: none; /* Oculto por padrão */
            padding: 2rem;
            max-width: 1200px;
            margin: 3rem auto;
            width: 100%;
            background-color: var(--text-light);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            flex-grow: 1;
            opacity: 0; /* Inicialmente transparente */
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .container.active {
            display: block; /* Mostrado quando ativo */
            opacity: 1;
            transform: translateY(0);
        }

        /* Cabeçalho */
        header {
            background: linear-gradient(to right, var(--primary-color), #5a6aa3);
            color: var(--text-light);
            padding: 1rem 2rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 1000;
            width: 100%;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            width: 100%;
            justify-content: center;
        }

        .logo {
            height: 60px;
            width: auto;
            max-width: 100%;
        }

        .header-content h1 {
            color: var(--text-light);
            margin-bottom: 0;
            font-size: clamp(1.8rem, 3vw, 2.5rem);
        }

        nav {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            width: 100%;
        }

        nav button, .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: var(--text-light);
            cursor: pointer;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            white-space: nowrap;
            transition: var(--transition);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        nav button:hover, .nav-btn:hover {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            border-color: var(--secondary-color);
            transform: translateY(-4px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.25);
        }

        .nav-btn.active {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            font-weight: 700;
            border-color: var(--secondary-color);
        }

        #logoutBtn {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
        }

        #logoutBtn:hover {
             background-color: #c0392b;
             border-color: #c0392b;
             color: var(--text-light);
        }


        @media (min-width: 768px) {
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                gap: 2rem;
            }

            .logo-container {
                width: auto;
                justify-content: flex-start;
            }

            nav {
                width: auto;
                flex-wrap: nowrap;
            }
        }

        /* Página de Login */
        #loginContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary-color) 0%, #5a6aa3 100%);
            padding: 2rem;
            width: 100%;
        }

        .login-box {
            background-color: rgba(255, 255, 255, 0.98);
            padding: 3rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 100%;
            max-width: 480px;
            text-align: center;
            animation: fadeInScale 0.7s ease-out;
        }

         @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .login-box h1 {
            color: var(--primary-color);
            margin-bottom: 2rem;
        }

         .login-options {
             margin-top: 2rem;
             border-top: 1px solid #e9ecef;
             padding-top: 1.5rem;
             text-align: center;
         }

         .login-options p {
             margin-bottom: 1.5rem;
             color: #6c757d;
             font-weight: 600;
         }


        /* Formulários */
        .form-group {
            margin-bottom: 1.5rem;
            width: 100%;
            text-align: left;
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 1px solid #ced4da;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background-color: #fff;
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: #6c757d;
            opacity: 0.8;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(60, 76, 139, 0.25);
        }

        .btn {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            border: none;
            padding: 1rem 2.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            margin-top: 2rem;
            width: 100%;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 0.6rem;
        }

        .btn i {
            font-size: 1.3rem;
        }

        .btn:hover {
            background-color: #d4c231;
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        .btn:disabled, .btn.disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.7; /* Adiciona opacidade para melhor visualização */
        }

        .btn-google {
             background-color: #ffffff;
             color: #4285f4;
             border: 1px solid #dadce0;
             box-shadow: 0 2px 4px rgba(0,0,0,0.1);
             margin-top: 1rem; /* Ajusta margem */
             font-weight: 600;
        }

         .btn-google:hover {
             background-color: #f8f9fa;
             border-color: #d2d4d7;
             box-shadow: 0 3px 6px rgba(0,0,0,0.15);
             transform: translateY(-2px); /* Ajusta o transform */
         }

         .btn-google i {
             font-size: 1.4rem; /* Aumenta um pouco o ícone */
             margin-right: 0.5rem;
             color: #ea4335; /* Cor do G do Google */
         }


        .form-row {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            width: 100%;
        }

        @media (min-width: 768px) {
            .form-row {
                flex-direction: row;
            }

            .form-row .form-group {
                flex: 1;
            }
        }

        /* Documentos */
        .documento-item {
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background-color: var(--light-color);
            border: 1px solid #e9ecef;
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .documento-item label {
             margin-bottom: 0;
             font-weight: 600;
             color: var(--dark-color);
             display: flex;
             align-items: center;
             gap: 0.6rem;
        }

        .documento-item input[type="file"] {
            padding: 0.8rem;
            border: 1px solid #ced4da;
            border-radius: var(--border-radius);
            background-color: white;
            width: 100%;
            cursor: pointer;
            transition: var(--transition);
        }

         .documento-item input[type="file"]::file-selector-button {
             background-color: var(--primary-color);
             color: var(--text-light);
             padding: 0.7rem 1.2rem;
             border: none;
             border-radius: var(--border-radius);
             cursor: pointer;
             margin-right: 1.5rem;
             transition: var(--transition);
             font-size: 1rem;
         }

          .documento-item input[type="file"]::file-selector-button:hover {
              background-color: #5a6aa3;
          }


        /* Lista de Funcionários */
        .funcionarios-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .funcionario-card {
            background-color: white;
            border: 1px solid #dee2e6;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .funcionario-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.18);
        }

        .funcionario-card h3 {
            margin-bottom: 0.8rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        .funcionario-card p {
            margin-bottom: 0.6rem;
            color: #555;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
         .funcionario-card p i {
             font-size: 1.1rem;
             color: var(--primary-color);
         }


        .progress-bar-container {
            margin: 1.5rem 0 1rem;
        }

        .progress-bar {
            height: 14px;
            background-color: #e9ecef;
            border-radius: 7px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
            position: relative;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--secondary-color), #f0d94c);
            transition: width 0.5s ease;
            border-radius: 7px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-size: 0.85rem;
            font-weight: bold;
            color: var(--primary-color);
            position: relative;
            z-index: 1;
        }

        .progress-bar span {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--dark-color);
            z-index: 2;
        }

        .download-btn {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            border: none;
            padding: 0.7rem 1.4rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-top: 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            gap: 0.6rem;
        }

        .download-btn:hover {
            background-color: #d4c231;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Página de Documentos do Funcionário */
        #documentosFuncionario .documentos-container {
            margin-top: 2.5rem;
        }

         #documentosFuncionario .documento-view {
            background-color: var(--light-color);
            border: 1px solid #e9ecef;
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
         }

         #documentosFuncionario .documento-view p {
             margin-bottom: 0.8rem;
             color: #555;
             display: block;
             gap: 0;
         }

         #documentosFuncionario .documento-view strong {
             color: var(--dark-color);
         }
         #documentosFuncionario .documento-view .download-btn {
             margin-top: 1.5rem;
         }


        /* Controle de Pessoas */
        #controlePessoas .form-row {
             margin-bottom: 2.5rem;
        }

        #listaPessoas {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
            margin: 2.5rem 0;
        }

        .pessoa-card {
            background-color: white;
            border: 1px solid #dee2e6;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .pessoa-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }

        .pessoa-card h4 {
            margin-bottom: 0.8rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

         .pessoa-card p {
             margin-bottom: 0.6rem;
             color: #555;
             font-size: 0.95rem;
             display: flex;
             align-items: center;
             gap: 0.5rem;
         }
          .pessoa-card p i {
             font-size: 1.1rem;
             color: var(--primary-color);
         }


        .pessoa-actions {
            margin-top: 1.5rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn-remover {
            background-color: var(--accent-color);
            color: white;
            padding: 0.7rem 1.4rem;
            font-size: 0.95rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            border: none; /* Adicionado para consistência com outros botões */
            cursor: pointer;
        }

        .btn-remover:hover {
            background-color: #c0392b;
            transform: translateY(-3px);
        }

        .resumo-pessoas {
            margin-top: 3rem;
            padding: 2rem;
            background-color: #eef2f7;
            border-left: 5px solid var(--primary-color);
            border-radius: var(--border-radius);
        }

        .resumo-pessoas h4 {
            margin-bottom: 1.5rem;
            color: var(--primary-color);
             display: flex;
             align-items: center;
             gap: 0.6rem;
        }

        .resumo-pessoas p {
            margin-bottom: 0.8rem;
            font-size: 1rem;
            color: var(--dark-color);
             display: flex;
             align-items: center;
             gap: 0.5rem;
        }

        .status-enviado {
            color: #28a745;
            font-weight: bold;
             display: flex;
             align-items: center;
             gap: 0.4rem;
        }
         .status-enviado i {
             color: #28a745;
         }


        .status-pendente {
            color: var(--accent-color);
            font-weight: bold;
             display: flex;
             align-items: center;
             gap: 0.4rem;
        }
         .status-pendente i {
             color: var(--accent-color);
         }


        /* Seções Expansíveis */
        .section-title {
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            padding: 1.2rem 1.5rem;
            background-color: var(--light-color);
            border-radius: var(--border-radius);
            margin: 2rem 0 0;
            transition: var(--transition);
            font-weight: 700;
            color: var(--primary-color);
            border: 1px solid #dee2e6;
            box-shadow: 0 1px 5px rgba(0,0,0,0.05);
        }

        .section-title:hover {
            background-color: #e9ecef;
             box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section-title i {
            margin-left: 15px;
            transition: transform 0.3s ease;
            font-size: 1.2rem;
        }

         .section-title.expanded i {
             transform: rotate(180deg);
         }

        .section-content {
            padding: 0 1.5rem;
            background-color: white;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            overflow: hidden;
            transition: max-height 0.6s ease-out, padding 0.6s ease-out; /* Transição mais suave */
            max-height: 0; /* Inicialmente oculto */
            padding-top: 0;
            padding-bottom: 0;
            border: 1px solid #dee2e6;
            border-top: none; /* Remove a borda superior para conectar visualmente ao título */
        }

         .section-content.expanded {
             max-height: 2000px; /* Valor grande o suficiente para acomodar o conteúdo */
             padding-top: 1.5rem;
             padding-bottom: 1.5rem;
             border-top: 1px solid #dee2e6; /* Adiciona a borda superior de volta quando expandido */
         }


        /* Rodapé */
        footer {
            background-color: var(--dark-color);
            color: var(--light-color);
            text-align: center;
            padding: 2.5rem 1.5rem;
            margin-top: auto;
        }

        .footer-logo {
            height: 45px;
            margin-bottom: 2rem;
            filter: brightness(0) invert(1); /* Inverte as cores para serem visíveis no fundo escuro */
        }

        footer p {
            font-size: 0.95rem;
            color: #adb5bd;
        }

        /* Mensagens de Status */
        .status-message {
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 2.5rem;
            display: none;
            animation: fadeIn 0.6s ease;
            font-weight: 600;
            text-align: center;
            word-break: break-word; /* Quebra palavras longas */
        }

        .status-message.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

         .status-message.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }


        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
            overflow-y: auto;
            backdrop-filter: blur(8px);
        }

        .modal-content {
            background-color: white;
            padding: 2.5rem;
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 450px;
            box-shadow: var(--box-shadow);
            text-align: center;
            animation: modalOpen 0.5s ease-out;
        }

         @keyframes modalOpen {
             from { opacity: 0; transform: translateY(-60px); }
             to { opacity: 1; transform: translateY(0); }
         }

        .modal-content h3 {
            margin-bottom: 1.5rem;
            color: var(--primary-color);
             display: flex;
             align-items: center;
             justify-content: center;
             gap: 0.6rem;
        }

        .modal-content p {
            margin-bottom: 2rem;
            color: #555;
        }

        .modal-actions {
            display: flex;
            justify-content: space-around;
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .modal-actions .btn {
            width: auto;
            padding: 0.9rem 1.8rem;
            font-size: 1rem;
        }

         .sr-only {
             position: absolute;
             width: 1px;
             height: 1px;
             padding: 0;
             margin: -1px;
             overflow: hidden;
             clip: rect(0, 0, 0, 0);
             border: 0;
         }


        /* Responsividade Geral */
        @media (max-width: 767px) {
            .container {
                margin: 2rem auto;
                padding: 1.5rem;
            }

            h1 { font-size: 1.8rem; }
            h2 { font-size: 1.5rem; gap: 0.5rem;}
            h3 { font-size: 1.3rem; gap: 0.4rem;}
            h4 { font-size: 1.1rem; gap: 0.4rem;}
            p, label, input, button, select, textarea { font-size: 0.95rem; }

            .login-box {
                padding: 2rem;
            }

            .btn {
                padding: 0.9rem 2rem;
                font-size: 1rem;
            }

            .nav-btn, nav button {
                padding: 0.7rem 1.2rem;
                font-size: 0.9rem;
                gap: 0.5rem;
            }

            .funcionario-card, .pessoa-card {
                padding: 1.5rem;
            }

            .documento-item {
                padding: 1.2rem;
                gap: 0.8rem;
            }
             .documento-item input[type="file"]::file-selector-button {
                  padding: 0.6rem 1rem;
                  margin-right: 1rem;
                  font-size: 0.9rem;
             }


            .section-title {
                padding: 1rem 1.2rem;
                margin-top: 1.5rem;
                 gap: 0.8rem;
            }
            .section-title h3 {
                 margin-bottom: 0; /* Remove margin bottom do h3 dentro do title */
                 gap: 0.6rem;
            }
            .section-title i {
                 margin-left: 10px;
                 font-size: 1rem;
            }


            .section-content {
                 padding: 0 1.2rem;
                 margin-bottom: 1.5rem;
             }
             .section-content.expanded {
                 padding-top: 1.2rem;
                 padding-bottom: 1.2rem;
             }


            .modal-content {
                padding: 2rem;
            }

             .modal-actions {
                 flex-direction: column;
                 gap: 1rem;
                 margin-top: 1.5rem;
             }
             .modal-actions .btn {
                 width: 100%;
             }
        }

        /* Ajustes para telas muito pequenas (menos de 400px) */
        @media (max-width: 399px) {
            .logo {
                height: 50px;
            }
            .header-content h1 {
                font-size: 1.5rem;
            }
             .nav-btn, nav button {
                 font-size: 0.8rem;
                 padding: 0.5rem 0.8rem;
                 gap: 0.3rem;
             }
             .btn {
                 font-size: 0.9rem;
                 padding: 0.8rem 1.5rem;
             }
             .form-group label i, .documento-item label i, .funcionario-card p i, .pessoa-card p i, .resumo-pessoas h4 i, .resumo-pessoas p i, .status-enviado i, .status-pendente i, .modal-content h3 i, h2 i {
                 font-size: 0.9em;
             }
             .footer-logo {
                 height: 40px;
             }
             footer p {
                 font-size: 0.9rem;
             }
        }

    </style>
</head>
<body>
    <!-- Página de Login -->
    <div id="loginContainer">
        <div class="login-box">
            <div style="text-align: center; margin-bottom: 30px;">
                <img src="img/GZL - Logos_pages-to-jpg-0001.jpg" alt="Logo da Empresa" class="logo">
            </div>
            <h1>Sistema de Documentos</h1>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email"><i class="fas fa-envelope"></i> E-mail</label>
                    <input type="email" id="email" required placeholder="Digite seu e-mail">
                </div>
                <div class="form-group">
                    <label for="senha"><i class="fas fa-lock"></i> Senha</label>
                    <input type="password" id="senha" required placeholder="Digite sua senha">
                </div>
                <button type="submit" class="btn"><i class="fas fa-sign-in-alt"></i> Entrar</button>
            </form>

            <div class="login-options">
                 <p>Ou entre com:</p>
                 <button id="googleSignInBtn" class="btn btn-google">
                     <i class="fab fa-google"></i> Entrar com Google
                 </button>
            </div>
        </div>
    </div>

    <!-- Sistema Principal (inicialmente oculto) -->
    <div id="appContainer" style="display: none; flex-direction: column; min-height: 100vh;">
        <header>
            <div class="header-content">
                <div class="logo-container">
                    <img src="img/f27651e8-0a8d-4460-b434-cc8e02929b8d.jpg" alt="Logo da Empresa" class="logo">
                    <h1>Sistema de Documentos</h1>
                </div>
                <nav>
                    <button class="nav-btn active" data-page="cadastro"><i class="fas fa-user-plus"></i> Cadastrar</button>
                    <button class="nav-btn" data-page="funcionarios" id="funcionariosBtn"><i class="fas fa-users"></i> Funcionários</button>
                    <button class="nav-btn" data-page="controlePessoas" id="controlePessoasBtn"><i class="fas fa-address-book"></i> Controle de Pessoas</button>
                    <button id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Sair</button>
                </nav>
            </div>
        </header>

        <!-- Página de Cadastro -->
        <div id="cadastro" class="container active">
            <div id="statusMessage" class="status-message"></div>

            <h2><i class="fas fa-clipboard-list"></i> Cadastro de Documentos</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="nome"><i class="fas fa-user"></i> Nome Completo</label>
                    <input type="text" id="nome" list="nomesFuncionarios" required placeholder="Digite o nome ou selecione">
                    <datalist id="nomesFuncionarios">
                        <option value="ADAUTON CAMPOS">
                        <option value="ADEMIR MORAES DE LIMA">
                        <option value="ADEMIR PEREIRA DA SILVA">
                        <option value="ADRIANO CHAVES DE SOUZA">
                        <option value="ALEFF BAPTISTA ELLER">
                        <option value="ALEXANDRE CHAVES">
                        <option value="ALEXANDRE FERNANDES DE OLIVEIRA">
                        <option value="ALEXSANDRO FARIA PEREIRA CARLETE">
                        <option value="ALEXANDRO DA SILVA LIMA">
                        <option value="ALEXSANDRO SILVA SANTOS">
                        <option value="ALLAN FERNANDES DA SILVA">
                        <option value="ANA PAULA DA SILVA">
                        <option value="ANDRE LUIS FERREIRA">
                        <option value="ANDRE LUIZ RODRIGUES">
                        <option value="ANDRE MARCELO REIS ALENCAR">
                        <option value="ANDREANS ANDRE DOS SANTOS">
                        <option value="ANDREY CARDOSO DA SILVA">
                        <option value="ANISIO BUSCARINI">
                        <option value="ANTONIO AFONSO DE QUEIROZ FILHO">
                        <option value="ANTONIO CEZAR DA CUNHA JUNIOR">
                        <option value="BENEDITO DONIZETI DE OLIVEIRA">
                        <option value="BRENO HENRIQUE PASIN FAUSTINO">
                        <option value="BRUNO FERNANDES DA SILVA">
                        <option value="BRUNO HENRIQUE DA CRUZ LISBOA">
                        <option value="BRUNO JOSE RAMALHO">
                        <option value="CAMILO DE OLIVEIRA DOS SANTOS">
                        <option value="CARLOS LUIZ DE FARIA">
                        <option value="CAUE LUIZ">
                        <option value="CLAUDINEI ALVES DE OLIVEIRA">
                        <option value="CLAYTON LOURENCO DOS SANTOS">
                        <option value="CLEYTON OLIVEIRA DA SILVA">
                        <option value="CLOVIS SEBASTIAO BRUNO">
                        <option value="DAIANA APARECIDA SANTOS SILVA">
                        <option value="DANIEL SANTOS DE CARVALHO">
                        <option value="DANILO DE MATOS LOPES">
                        <option value="DAVID ALMEIDA PASCOAL">
                        <option value="DEIVID ALLAN CASTRO DE MATOS">
                        <option value="DIOGO COSTA DE ANDRADE">
                        <option value="DIOGO LUIZ SILVA WEBER">
                        <option value="DOUGLAS ALEXANDRE MARTINS">
                        <option value="DOUGLAS HIDEO TANAKA PEREIRA">
                        <option value="EDERSON APARECIDO AZEVEDO ANTUNES">
                        <option value="EDMILSON DOS SANTOS">
                        <option value="ELIAS ALVES SOARES">
                        <option value="ELIEL MIRANDA SILVA">
                        <option value="ELIZABETH RODRIGUES CLARO">
                        <option value="EMERSON TEODORO">
                        <option value="ERICA SIMONE JOSE DOS SANTOS">
                        <option value="ERICK OLIVEIRA ALVES">
                        <option value="ERIK ALVES SAMUEL">
                        <option value="FABIO NASCIMENTO VANUCCI">
                        <option value="FLAVIO RODRIGUES">
                        <option value="FELIPE ANTONIO DUTRA EVANGELISTA">
                        <option value="FELIPE EDUARDO ROCHALO DE MATOS">
                        <option value="FELIPE RAFAEL PRADO MATIAS">
                        <option value="FERNANDO ALISSON ALMEIDA CAMARGO">
                        <option value="FERNANDO ALVES SANTOS">
                        <option value="FLAVIO RODRIGUES (PCD)">
                        <option value="FRANCISCO EROLES JUNIOR">
                        <option value="GABRIEL ANDREW DA SILVA">
                        <option value="GABRIEL APARECIDO MORAES DE SOUZA - ADM">
                        <option value="GABRIEL SANDRI DOMINGUES">
                        <option value="GIOVANNI JOSE DOS SANTOS PRADO">
                        <option value="GUILHERME DE OLIVEIRA FERREIRA">
                        <option value="GUILHERME MATHEUS DA SILVA">
                        <option value="GUSTAVO LIMA DOS SANTOS">
                        <option value="HENRIQUE GOMES FERREIRA">
                        <option value="HENRIQUE RAFAEL DE OLIVEIRA BRAGA">
                        <option value="HENRIQUE RODRIGUES JIMPON HU">
                        <option value="HENRRI NICOLAS DE JESUS ROSA">
                        <option value="HIAGO LINCON CUBAS SIQUEIRA SILVA">
                        <option value="HIGOR APARECIDO DA SILVA">
                        <option value="ISAIAS MARIANO DE SOUZA">
                        <option value="JANDERSON CAMARGO">
                        <option value="JEFERSON DE SOUZA SOARES">
                        <option value="JESSE DE SOUZA MELLO">
                        <option value="JIULY GUSTAVO MAIA MILITAO">
                        <option value="JOAO JOEL MENDES">
                        <option value="JOAO PEDRO CARVALHO DOS SANTOS">
                        <option value="JOAO PEDRO SILVEIRA">
                        <option value="JOAO VICTOR RODRIGUES SILVA">
                        <option value="JOAO VITOR ALMEIDA DOS SANTOS">
                        <option value="JONATHAN HENRIQUE SIQUEIRA DO NASCIMENTO">
                        <option value="JONATHAN SULIVAN DAS NEVES">
                        <option value="JOSE APOLINARIO">
                        <option value="JOSE CARLOS ALVES LINS (PCD)">
                        <option value="JOSE CARLOS DE SOUZA">
                        <option value="JOSE JONATAS DOS SANTOS COSTA">
                        <option value="JULIO CEZAR DOS SANTOS">
                        <option value="JULIO DA SILVA PINTO">
                        <option value="KAUAN DE SOUZA FARIAS">
                        <option value="KAUE SILVA DE PAULA">
                        <option value="KENEDY DE OLIVEIRA">
                        <option value="KLEBERSON PEREIRA DOS SANTOS">
                        <option value="LEANDRO FERREIRA DA SILVA">
                        <option value="LEANDRO FERREIRA DE OLIVEIRA">
                        <option value="LEONARDO DA SILVA COSTA">
                        <option value="LEONARDO GODOY DOS SANTOS">
                        <option value="LEONARDO VASCONCELOS DO PRADO">
                        <option value="LUCAS DA SILVA PASSOS">
                        <option value="LUCAS DE OLIVEIRA ANDRADE">
                        <option value="LUCAS GABRIEL DA SILVA">
                        <option value="LUCAS MONTEIRO VASCONCELOS">
                        <option value="LUIS FABIANO APARECIDO ORTIZ DAS NEVES">
                        <option value="LUIS FELIPE DONIZETI DE SANTANA FERNANDES">
                        <option value="LUIS FERNANDO DE SOUZA MACHADO">
                        <option value="LUIS HENRIQUE DA SILVA">
                        <option value="LUIZ GUSTAVO ALMEIDA DOS SANTOS">
                        <option value="LUIZ HENRIQUE FERNANDES">
                        <option value="LUIZ ROBERTO CARRASCO FRANCO">
                        <option value="MARCELO DA SILVA RODRIGUES">
                        <option value="MARCELO DONIZETTI DOS SANTOS DIAS">
                        <option value="MARCELO GORRERA BRITTO FERNANDES">
                        <option value="MARCIO APARECIDO DE OLIVEIRA">
                        <option value="MARCIO APARECIDO DE OLIVEIRA JUNIOR">
                        <option value="MARCO APARECIDO DAS NEVES">
                        <option value="MARIA BENEDITA BORGES">
                        <option value="MARINES DE MORAES PIRES">
                        <option value="MATEUS FRANCO LEAO SENA">
                        <option value="MATHEUS GUSTAVO SANCHES DE MELO">
                        <option value="MATHEUS KEVIN DA SILVA ALMEIDA">
                        <option value="MATHEUS LOTITO BITTENCOURT">
                        <option value="MERCIA DE SOUZA SANDRI RODRIGUES">
                        <option value="MURILO MAESTRE FERREIRA DOS SANTOS">
                        <option value="NELSON IUSUTI DOS SANTOS">
                        <option value="NICOLAS SILVA DOS SANTOS">
                        <option value="NICOLAS WILTON MONTEIRO">
                        <option value="PAULO GABRIEL">
                        <option value="PAULO HENRIQUE DE OLIVEIRA">
                        <option value="PAULO ROGERIO CALIXTO">
                        <option value="PEDRO DOS SANTOS">
                        <option value="PEDRO HENRIQUE DA SILVA JUNGERS FRANCO">
                        <option value="PETERSON SIMEAO TEIXEIRA">
                        <option value="RAELY CAROLINE DE LIMA PASSOS">
                        <option value="RAFAEL DE GODOY SANTOS">
                        <option value="RAFAEL MARQUES DE PAULA">
                        <option value="RAFAEL RODRIGUES GOMES">
                        <option value="RAPHAEL PEREIRA DOS SANTOS">
                        <option value="REGINALDO BARBOSA DOS SANTOS">
                        <option value="REGINALDO FIRMINO DOS SANTOS JUNIOR">
                        <option value="RENAN OLIVEIRA VIANA">
                        <option value="ROBERT APARECIDO DE OLIVEIRA">
                        <option value="ROBERT SOUZA SILVA">
                        <option value="RODMILSON FELIPE SOUZA LIMA">
                        <option value="RODRIGO APARECIDO TEIXEIRA">
                        <option value="RODRIGO DA SILVA BASTIANELLI">
                        <option value="ROMILSON FLORIANO">
                        <option value="RUBENS TAVARES RODRIGUES JUNIOR">
                        <option value="SAMUEL SALES GONCALVES DOS ANJOS">
                        <option value="SAMUEL WASHINGTON GOMES DOS SANTOS">
                        <option value="SANDRA PEREIRA DE SIQUEIRA DIAS">
                        <option value="SANDRO MARTINS PINTO">
                        <option value="SEBASTIAO ELIAS FEITOZA">
                        <option value="SILVIO DOS SANTOS">
                        <option value="SIMONE APARECIDA DOS SANTOS">
                        <option value="SONIA REGINA OLIVEIRA MARQUES">
                        <option value="TANIA DA SILVA GENIVAL">
                        <option value="TEODORO FERNANDES">
                        <option value="TIAGO DA SILVA MARQUES">
                        <option value="VAGNER ROBERTO DA SILVA">
                        <option value="VALDIR LEMOS DE OLIVEIRA JUNIOR">
                        <option value="VALDIR ROBERTO DE OLIVEIRA">
                        <option value="VALERIA FERNANDES CARVALHO">
                        <option value="VALTAIR APARECIDO LEITE ALVES">
                        <option value="VICTOR HENRIQUE DE SANTANA FERNANDES">
                        <option value="VINICIUS RAFAEL NUNES BARBOSA">
                        <option value="VITOR HENRIQUE DIONISIO PEREIRA">
                        <option value="WAGNER LIMA DE SOUZA">
                        <option value="WEMERSON ALENCAR MENDONCA">
                        <option value="WERISSON SILVA DE ARAUJO">
                        <option value="WESLEI JUNIOR DOS SANTOS DE CAMPOS">
                        <option value="WESLLEY DIAS DA COSTA">
                        <option value="WILLIAN HENRIQUE DINIZ">
                        <option value="WILLIAN JUNIOR CORDEIRO DE CRISTO">
                    </datalist>
                </div>
                <div class="form-group">
                    <label for="cpf"><i class="fas fa-id-card"></i> CPF</label>
                    <input type="text" id="cpf" required placeholder="Somente números" maxlength="11">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="cargo"><i class="fas fa-briefcase"></i> Cargo</label>
                    <select id="cargo" required>
                        <option value="">Selecione o cargo</option>
                        <option value="assistente_logistica">Assistente de Logistica</option>
                        <option value="assistente_RH">Assistente de RH</option>
                        <option value="auxiliar_expedicao">Auxiliar de Expedição</option>
                        <option value="auxiliar_logistica">Auxiliar de Logistica</option>
                        <option value="auxiliar_logistica_1">Auxiliar de Logistica 1</option>
                        <option value="conferente_expedicao">Conferente de Expedição</option>
                        <option value="conferente_1">Conferente 1</option>
                        <option value="Movimentador_Carga">Movimentador de Carga</option>
                        <option value="encarregado_logistica">Encarregado Logistica</option>
                        <option value="mototrista_caminhao_1">Motorista de Caminhão 1</option>
                        <option value="operador_Conferente_2">Operador Conferente 2</option>
                        <option value="operador_Conferente_3">Operador Conferente 3</option>
                        <option value="operador_Conferente_Expedição">Operador Conferente Expedição</option>
                        <option value="operador_empilhadeira_2">Operador de Empilhadeira 2</option>
                        <option value="operador_empilhadeira_3">Operador de Empilhadeira 3</option>
                        <option value="operador_logistico">Operador Logistico</option>
                        <option value="operador_maquina_1">Operador de Maquina 1</option>
                        <option value="tecnico_seguranca_trabalho_pl">Tecnico de Segurança do Trabalho Pl</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="operaMaquina"><i class="fas fa-cogs"></i> Irá operar máquina?</label>
                    <select id="operaMaquina" required>
                        <option value="">Selecione</option>
                        <option value="sim">Sim</option>
                        <option value="nao">Não</option>
                    </select>
                </div>
            </div>

             <div class="form-row">
                <div class="form-group">
                    <label for="temDependentes"><i class="fas fa-child"></i> Possui dependentes?</label>
                    <select id="temDependentes" required>
                        <option value="">Selecione</option>
                        <option value="sim">Sim</option>
                        <option value="nao">Não</option>
                    </select>
                </div>
            </div>


            <div class="section-title" data-section="documentosPessoais">
                <h3><i class="fas fa-address-card"></i> Documentos Pessoais</h3>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div id="documentosPessoais" class="section-content">
                <div class="documento-item">
                    <label for="rg"><i class="fas fa-id-badge"></i> RG</label>
                    <input type="file" id="rg" required>
                </div>
                <div class="documento-item">
                    <label for="cpfDoc"><i class="fas fa-file-alt"></i> CPF (Documento)</label>
                    <input type="file" id="cpfDoc" required>
                </div>
                <div class="documento-item">
                    <label for="tituloEleitor"><i class="fas fa-vote-yea"></i> Título de Eleitor</label>
                    <input type="file" id="tituloEleitor" required>
                </div>
                <div class="documento-item">
                    <label for="reservista"><i class="fas fa-medal"></i> Certidão de Reservista</label>
                    <input type="file" id="reservista" required>
                </div>
            </div>

            <div class="section-title" data-section="documentosFamiliares">
                <h3><i class="fas fa-people-carry"></i> Documentos Familiares</h3>
                 <i class="fas fa-chevron-down"></i>
            </div>
            <div id="documentosFamiliares" class="section-content">
                <div class="documento-item">
                    <label for="certidaoNascimento"><i class="fas fa-baby"></i> Certidão de Nascimento/Casamento</label>
                    <input type="file" id="certidaoNascimento" required>
                </div>
                <div class="documento-item" id="dependentesContainer" style="display: none;">
                    <label for="certidaoFilhos"><i class="fas fa-child-reaching"></i> Certidão de Nascimento dos Filhos</label>
                    <input type="file" id="certidaoFilhos">
                </div>
                <div class="documento-item" id="cpfDependentesContainer" style="display: none;">
                    <label for="cpfDependentes"><i class="fas fa-file-invoice"></i> CPF dos Dependentes</label>
                    <input type="file" id="cpfDependentes">
                </div>
                <div class="documento-item" id="vacinaFilhosContainer" style="display: none;">
                    <label for="vacinaFilhos"><i class="fas fa-syringe"></i> Carteira de Vacinação dos Filhos</label>
                    <input type="file" id="vacinaFilhos">
                </div>
            </div>

            <div class="section-title" data-section="documentosResidenciais">
                <h3><i class="fas fa-home"></i> Documentos Residenciais</h3>
                 <i class="fas fa-chevron-down"></i>
            </div>
            <div id="documentosResidenciais" class="section-content">
                <div class="documento-item">
                    <label for="comprovanteResidencia"><i class="fas fa-file-contract"></i> Comprovante de Residência</label>
                    <input type="file" id="comprovanteResidencia" required>
                </div>
            </div>

            <div class="section-title" data-section="outrosDocumentos">
                <h3><i class="fas fa-folder-open"></i> Outros Documentos</h3>
                 <i class="fas fa-chevron-down"></i>
            </div>
            <div id="outrosDocumentos" class="section-content">
                <div class="documento-item">
                    <label for="foto3x4"><i class="fas fa-camera"></i> Foto 3x4</label>
                    <input type="file" id="foto3x4" required>
                </div>
                <div class="documento-item" id="cnhContainer" style="display: none;">
                    <label for="cnh"><i class="fas fa-car"></i> CNH</label>
                    <input type="file" id="cnh">
                </div>
                <div class="documento-item" id="certificadoCursoContainer" style="display: none;">
                    <label for="certificadoCurso"><i class="fas fa-certificate"></i> Certificado de Curso Específico</label>
                    <input type="file" id="certificadoCurso">
                </div>
                 <div class="documento-item">
                    <label for="pis"><i class="fas fa-money-check-alt"></i> Cartão do PIS</label>
                    <input type="file" id="pis" required>
                </div>
                <div class="documento-item">
                    <label for="historicoEscolar"><i class="fas fa-graduation-cap"></i> Histórico Escolar</label>
                    <input type="file" id="historicoEscolar">
                </div>
                <div class="documento-item">
                    <label for="vacinaCovid"><i class="fas fa-virus-slash"></i> Comprovante de Vacina - COVID-19</label>
                    <input type="file" id="vacinaCovid" required>
                </div>
            </div>

            <button id="salvarBtn" class="btn"><i class="fas fa-save"></i> Salvar Documentos</button>
        </div>

        <!-- Página de Funcionários -->
        <div id="funcionarios" class="container">
            <h2><i class="fas fa-users"></i> Funcionários Cadastrados</h2>
            <div class="form-group" style="margin-bottom: 20px;">
                <label for="filtroFuncionarios"><i class="fas fa-search"></i> Filtrar por Nome</label>
                <input type="text" id="filtroFuncionarios" placeholder="Digite o nome para filtrar...">
            </div>
            <div class="funcionarios-list" id="funcionariosList">
                <!-- Lista será preenchida dinamicamente -->
            </div>
        </div>

        <!-- Página de Documentos do Funcionário -->
        <div id="documentosFuncionario" class="container">
            <button id="voltarBtn" class="btn"><i class="fas fa-arrow-left"></i> Voltar</button>
            <h2 id="nomeFuncionario">Documentos de </h2>
            <div class="documentos-container" id="documentosContainer">
                <!-- Documentos serão listados aqui -->
            </div>
        </div>

        <!-- Página de Controle de Pessoas -->
        <div id="controlePessoas" class="container">
            <h2><i class="fas fa-address-book"></i> Controle de Pessoas</h2>

            <div class="form-row">
                <div class="form-group">
                    <label for="novaPessoaNome"><i class="fas fa-user-plus"></i> Nomes (separados por vírgula)</label>
                    <input type="text" id="novaPessoaNome" required placeholder="Ex: João Silva, Maria Oliveira, Pedro Santos">
                </div>
                <div class="form-group">
                    <label for="novaPessoaCPF"><i class="fas fa-id-card"></i> CPFs (opcional, separados por vírgula)</label>
                    <input type="text" id="novaPessoaCPF" placeholder="Somente números, ex: 12345678901,98765432100">
                </div>
            </div>
             <button id="adicionarPessoaBtn" class="btn"><i class="fas fa-plus"></i> Adicionar Pessoas</button>


            <div class="form-group" style="margin-top: 2rem;">
                <label for="filtroPessoas"><i class="fas fa-search"></i> Filtrar por Nome</label>
                <input type="text" id="filtroPessoas" placeholder="Digite para filtrar...">
            </div>

            <h3>Pessoas Cadastradas</h3>
            <div id="listaPessoas" style="margin-top: 20px;"></div>

            <div class="resumo-pessoas">
                <h4><i class="fas fa-chart-bar"></i> Resumo</h4>
                <p><i class="fas fa-address-card"></i> Total de Pessoas: <span id="totalPessoas">0</span></p>
                <p><i class="fas fa-check-circle status-enviado"></i> Documentos Enviados: <span id="totalEnviados">0</span></p>
                <p><i class="fas fa-exclamation-triangle status-pendente"></i> Documentos Pendentes: <span id="totalPendentes">0</span></p>
            </div>
        </div>

        <!-- Modal de Senha para Funcionários -->
        <div id="senhaModal" class="modal">
            <div class="modal-content">
                <h3 class="modal-title"><i class="fas fa-lock"></i> Acesso Restrito</h3>
                <p>Digite a senha para acessar esta área:</p>
                <div class="form-group" style="margin-bottom: 0;">
                    <label for="senhaAcesso" class="sr-only">Senha de Acesso</label>
                    <input type="password" id="senhaAcesso" placeholder="Digite a senha">
                </div>
                <div class="modal-actions">
                    <button id="cancelarSenhaBtn" class="btn"><i class="fas fa-times-circle"></i> Cancelar</button>
                    <button id="confirmarSenhaBtn" class="btn"><i class="fas fa-check-circle"></i> Confirmar</button>
                </div>
            </div>
        </div>

        <footer>
            <p>Sistema de Gestão de Documentos © 2025 - Todos os direitos reservados</p>
        </footer>

        <!-- Firebase e Scripts -->
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

        <script>
            // Configuração do Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyBZE7myNAPADs8yJx8ejr1qnaqV60U-LvU", // SUBSTITUA PELA SUA CHAVE REAL
                authDomain: "ritmo-44c20.firebaseapp.com", // SUBSTITUA PELO SEU DOMÍNIO REAL
                databaseURL: "https://ritmo-44c20-default-rtdb.firebaseio.com", // SUBSTITUA PELA SUA URL REAL
                projectId: "ritmo-44c20", // SUBSTITUA PELO SEU PROJECT ID REAL
                storageBucket: "ritmo-44c20.firebasestorage.app", // SUBSTITUA PELO SEU STORAGE BUCKET REAL
                messagingSenderId: "784049161032", // SUBSTITUA PELO SEU SENDER ID REAL
                appId: "1:784049161032:web:480bf33cb60e020ca3e97d", // SUBSTITUA PELO SEU APP ID REAL
                measurementId: "G-DPYNXD0BNC" // SUBSTITUA PELO SEU MEASUREMENT ID REAL
            };

            // Inicializa o Firebase
            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const database = firebase.database();
            const storage = firebase.storage();
            const funcionariosRef = database.ref('funcionarios');
            const pessoasRef = database.ref('pessoasControle');

            // Lista de documentos obrigatórios (Base)
            const DOCUMENTOS_OBRIGATORIOS_BASE = [
                'rg', 'cpfDoc', 'tituloEleitor', 'reservista',
                'certidaoNascimento', 'comprovanteResidencia',
                'foto3x4', 'pis', 'vacinaCovid'
            ];

             // Lista de documentos adicionais condicionais
             const DOCUMENTOS_ADICIONAIS_CONDICIONAIS = [
                'certidaoFilhos', 'cpfDependentes', 'vacinaFilhos',
                'cnh', 'certificadoCurso', 'historicoEscolar'
            ];


            // Estado da aplicação
            let currentFuncionarioId = null;
            const SENHA_ADMIN = "PWESD233@#&"; // Senha para acessar áreas restritas (MUDAR PARA ALGO SEGURO E NÃO HARDCODADO EM PRODUÇÃO)

            // Função para mostrar página específica
            function showPage(pageId) {
                document.querySelectorAll('.container').forEach(page => {
                    page.classList.remove('active');
                });
                document.getElementById(pageId).classList.add('active');
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                const activeNavBtn = document.querySelector(`.nav-btn[data-page="${pageId}"]`);
                if (activeNavBtn) {
                    activeNavBtn.classList.add('active');
                }
                 // Fecha o modal de senha se estiver aberto
                 document.getElementById('senhaModal').style.display = 'none';
                 document.getElementById('senhaAcesso').value = '';
            }

            // Alternar seções - Ajustada para garantir max-height alto
            function toggleSection(sectionId) {
                const section = document.getElementById(sectionId);
                const title = section.previousElementSibling;
                const arrow = title.querySelector('i');

                const isExpanded = section.classList.contains('expanded');

                if (isExpanded) {
                    // Fechar
                    section.style.maxHeight = '0';
                    section.style.paddingTop = '0';
                    section.style.paddingBottom = '0';
                    section.classList.remove('expanded');
                    title.classList.remove('expanded');
                    arrow.classList.remove('fa-chevron-up');
                    arrow.classList.add('fa-chevron-down');
                } else {
                    // Abrir
                     // Define um max-height grande o suficiente antes de adicionar a classe 'expanded'
                     // para que a transição de max-height funcione.
                     // Calculamos a altura real do conteúdo para um max-height mais preciso
                     section.style.maxHeight = section.scrollHeight + 'px';
                     section.style.paddingTop = '1.5rem'; // Define o padding ao abrir
                     section.style.paddingBottom = '1.5rem'; // Define o padding ao abrir

                    section.classList.add('expanded');
                    title.classList.add('expanded');
                    arrow.classList.remove('fa-chevron-down');
                    arrow.classList.add('fa-chevron-up');

                    // Opcional: Após a transição, você pode resetar o max-height para 'none'
                    // para permitir que o conteúdo se ajuste caso mude dinamicamente.
                    // No entanto, para formulários estáticos, um valor grande fixo é geralmente suficiente.
                    // setTimeout(() => { section.style.maxHeight = 'none'; }, 600); // 600ms = duração da transição
                }
            }


            // Mostrar/ocultar campos condicionais
            function atualizarCamposCondicionais() {
                const temDependentes = document.getElementById('temDependentes').value;
                const operaMaquina = document.getElementById('operaMaquina').value;

                const dependentesContainer = document.getElementById('dependentesContainer');
                const cpfDependentesContainer = document.getElementById('cpfDependentesContainer');
                const vacinaFilhosContainer = document.getElementById('vacinaFilhosContainer');

                if (temDependentes === 'sim') {
                    dependentesContainer.style.display = 'flex';
                    cpfDependentesContainer.style.display = 'flex';
                    vacinaFilhosContainer.style.display = 'flex';
                    // Define required para campos de dependentes se 'sim'
                     document.getElementById('certidaoFilhos').required = true;
                     document.getElementById('cpfDependentes').required = true;
                     document.getElementById('vacinaFilhos').required = true;
                } else {
                    dependentesContainer.style.display = 'none';
                    cpfDependentesContainer.style.display = 'none';
                    vacinaFilhosContainer.style.display = 'none';
                    document.getElementById('certidaoFilhos').value = '';
                    document.getElementById('cpfDependentes').value = '';
                    document.getElementById('vacinaFilhos').value = '';
                     // Remove required para campos de dependentes se 'nao'
                     document.getElementById('certidaoFilhos').required = false;
                     document.getElementById('cpfDependentes').required = false;
                     document.getElementById('vacinaFilhos').required = false;
                }

                 const cnhContainer = document.getElementById('cnhContainer');
                 const certificadoCursoContainer = document.getElementById('certificadoCursoContainer');

                 if (operaMaquina === 'sim') {
                     cnhContainer.style.display = 'flex';
                     certificadoCursoContainer.style.display = 'flex';
                     // Define required para campos de máquina se 'sim'
                     document.getElementById('cnh').required = true;
                     document.getElementById('certificadoCurso').required = true;
                 } else {
                     cnhContainer.style.display = 'none';
                     certificadoCursoContainer.style.display = 'none';
                     document.getElementById('cnh').value = '';
                     document.getElementById('certificadoCurso').value = '';
                     // Remove required para campos de máquina se 'nao'
                     document.getElementById('cnh').required = false;
                     document.getElementById('certificadoCurso').required = false;
                 }
            }

            // Mostrar mensagem de status
            function showStatusMessage(message, type) {
                const statusElement = document.getElementById('statusMessage');
                statusElement.textContent = message;
                statusElement.className = `status-message ${type}`;
                statusElement.style.display = 'block';

                setTimeout(() => {
                    statusElement.style.display = 'none';
                }, 5000);
            }

            // Navegação
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const pageId = btn.dataset.page;
                    // Remove o handler click anterior do confirmarBtn antes de adicionar um novo
                    const confirmarBtn = document.getElementById('confirmarSenhaBtn');
                    confirmarBtn.removeEventListener('click', handleConfirmSenha);
                     document.getElementById('senhaAcesso').removeEventListener('keypress', handleSenhaKeyPress);


                    if (pageId === 'funcionarios' || pageId === 'controlePessoas') {
                        document.getElementById('senhaModal').style.display = 'flex';
                        document.getElementById('senhaAcesso').value = '';
                        document.getElementById('senhaAcesso').focus();

                        // Adiciona o novo handler com a lógica para a página específica
                        confirmarBtn.addEventListener('click', handleConfirmSenha.bind(null, pageId));
                         document.getElementById('senhaAcesso').addEventListener('keypress', handleSenhaKeyPress.bind(null, confirmarBtn));

                    } else {
                        showPage(pageId);
                    }
                });
            });

            // Função para o handler de clique do botão Confirmar Senha
            function handleConfirmSenha(pageId) {
                const senha = document.getElementById('senhaAcesso').value;
                if (senha === SENHA_ADMIN) {
                    document.getElementById('senhaModal').style.display = 'none';
                    showPage(pageId);
                    document.getElementById('senhaAcesso').value = '';
                     // Remove os handlers após sucesso
                     document.getElementById('confirmarSenhaBtn').removeEventListener('click', handleConfirmSenha);
                     document.getElementById('senhaAcesso').removeEventListener('keypress', handleSenhaKeyPress);

                } else {
                    alert('Senha incorreta!');
                    document.getElementById('senhaAcesso').value = '';
                    document.getElementById('senhaAcesso').focus();
                }
            }

             // Função para o handler de keypress no campo Senha (permite Enter)
             function handleSenhaKeyPress(confirmBtn, event) {
                 if (event.key === 'Enter') {
                     event.preventDefault();
                     confirmBtn.click();
                 }
             }


            // Modal de Senha - Cancelar
            document.getElementById('cancelarSenhaBtn').addEventListener('click', () => {
                document.getElementById('senhaModal').style.display = 'none';
                document.getElementById('senhaAcesso').value = '';
                 // Remove os handlers ao cancelar
                 document.getElementById('confirmarSenhaBtn').removeEventListener('click', handleConfirmSenha);
                 document.getElementById('senhaAcesso').removeEventListener('keypress', handleSenhaKeyPress);
            });


            // Login com E-mail e Senha
            document.getElementById('loginForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('email').value;
                const senha = document.getElementById('senha').value;

                auth.signInWithEmailAndPassword(email, senha)
                    .then(() => {
                        document.getElementById('loginContainer').style.display = 'none';
                        document.getElementById('appContainer').style.display = 'flex';
                        showPage('cadastro');
                        carregarFuncionarios();
                        carregarListaPessoas();
                    })
                    .catch(error => {
                        alert('Erro ao fazer login: ' + error.message);
                    });
            });

            // Login com Google
            document.getElementById('googleSignInBtn').addEventListener('click', async () => {
                 const provider = new firebase.auth.GoogleAuthProvider();
                 try {
                     await auth.signInWithPopup(provider);
                     // O onAuthStateChanged listener vai lidar com a transição de página
                 } catch (error) {
                     console.error("Erro no login com Google:", error);
                     alert("Erro ao fazer login com Google: " + error.message);
                 }
            });


            // Logout
            document.getElementById('logoutBtn').addEventListener('click', () => {
                auth.signOut()
                    .then(() => {
                        document.getElementById('loginContainer').style.display = 'flex';
                        document.getElementById('appContainer').style.display = 'none';
                    });
            });

            // Voltar para lista de funcionários
            document.getElementById('voltarBtn').addEventListener('click', () => {
                showPage('funcionarios');
            });

            // Event listeners para campos condicionais
            document.getElementById('temDependentes').addEventListener('change', atualizarCamposCondicionais);
            document.getElementById('operaMaquina').addEventListener('change', atualizarCamposCondicionais);

             // Configura listeners para os títulos das seções expansíveis
             document.querySelectorAll('.section-title').forEach(title => {
                 const sectionId = title.dataset.section;
                 title.addEventListener('click', () => toggleSection(sectionId));
             });


            // Salvar documentos
            document.getElementById('salvarBtn').addEventListener('click', async () => {
                const salvarBtn = document.getElementById('salvarBtn');

                // 1. Desabilita o botão imediatamente
                salvarBtn.disabled = true;
                salvarBtn.textContent = 'Salvando...'; // Opcional: Mudar texto para indicar processamento
                salvarBtn.classList.add('disabled'); // Adiciona classe para estilo disabled


                const nome = document.getElementById('nome').value.trim();
                const cpf = document.getElementById('cpf').value.trim().replace(/\D/g, '');
                const cargo = document.getElementById('cargo').value;
                const temDependentes = document.getElementById('temDependentes').value;
                const operaMaquina = document.getElementById('operaMaquina').value;

                // Lista de documentos obrigatórios baseada nas seleções
                 let documentosObrigatoriosParaValidacao = [...DOCUMENTOS_OBRIGATORIOS_BASE];
                 if (temDependentes === 'sim') {
                     documentosObrigatoriosParaValidacao.push('certidaoFilhos', 'cpfDependentes', 'vacinaFilhos');
                 }
                 if (operaMaquina === 'sim') {
                     documentosObrigatoriosParaValidacao.push('cnh', 'certificadoCurso');
                 }


                if (!nome || !cpf || cpf.length !== 11 || !cargo || temDependentes === '' || operaMaquina === '') {
                    showStatusMessage('Por favor, preencha todos os campos de texto e seleções obrigatórios corretamente (verifique o CPF)', 'error');
                    // 3. Habilita o botão em caso de erro de validação
                    salvarBtn.disabled = false;
                    salvarBtn.textContent = 'Salvar Documentos';
                    salvarBtn.classList.remove('disabled');
                    return;
                }

                 // Validação de arquivos obrigatórios
                 for (const docId of documentosObrigatoriosParaValidacao) {
                     const fileInput = document.getElementById(docId);
                     if (!fileInput || fileInput.files.length === 0) {
                         showStatusMessage(`Por favor, envie o documento obrigatório: ${getDocumentName(docId)}`, 'error');
                          // 3. Habilita o botão em caso de erro de validação
                         salvarBtn.disabled = false;
                         salvarBtn.textContent = 'Salvar Documentos';
                         salvarBtn.classList.remove('disabled');
                         return;
                     }
                 }


                const funcionarioData = {
                    nome,
                    cpf,
                    cargo,
                    temDependentes,
                    operaMaquina,
                    dataCadastro: new Date().toISOString(),
                    documentos: {}
                };

                try {
                    const todosDocumentosPossiveis = [...DOCUMENTOS_OBRIGATORIOS_BASE, ...DOCUMENTOS_ADICIONAIS_CONDICIONAIS];

                    // Usar Promise.all para processar uploads em paralelo
                    const uploadPromises = todosDocumentosPossiveis.map(async (docId) => {
                         const fileInput = document.getElementById(docId);
                         if (fileInput && fileInput.files.length > 0) {
                             const file = fileInput.files[0];
                             const base64 = await fileParaBase64(file);

                             funcionarioData.documentos[docId] = {
                                 nome: file.name,
                                 tipo: file.type, // Salva o tipo MIME
                                 tamanho: file.size,
                                 data: base64, // Salva como Base64
                                 dataUpload: new Date().toISOString()
                             };
                         }
                    });

                    // Aguarda todos os uploads terminarem
                    await Promise.all(uploadPromises);


                    await funcionariosRef.push().set(funcionarioData);

                    showStatusMessage('Documentos salvos com sucesso!', 'success');

                    // Limpa o formulário
                    document.getElementById('nome').value = '';
                    document.getElementById('cpf').value = '';
                    document.getElementById('cargo').value = '';
                    document.getElementById('temDependentes').value = '';
                    document.getElementById('operaMaquina').value = '';

                    const todosDocumentos = [...DOCUMENTOS_OBRIGATORIOS_BASE, ...DOCUMENTOS_ADICIONAIS_CONDICIONAIS];
                    todosDocumentos.forEach(docId => {
                        const input = document.getElementById(docId);
                        if (input) input.value = '';
                    });

                    atualizarCamposCondicionais();

                     // Fecha as seções expansíveis após salvar
                     document.querySelectorAll('.section-content').forEach(section => {
                         const title = section.previousElementSibling;
                         const arrow = title.querySelector('i');

                         section.classList.remove('expanded');
                         title.classList.remove('expanded');
                         arrow.classList.remove('fa-chevron-up');
                         arrow.classList.add('fa-chevron-down');

                         section.style.maxHeight = '0';
                         section.style.paddingTop = '0';
                         section.style.paddingBottom = '0';
                     });


                    carregarFuncionarios();

                } catch (error) {
                    console.error('Erro ao salvar documentos:', error);
                    showStatusMessage('Erro ao salvar documentos: ' + error.message, 'error');
                } finally {
                    // 2. Habilita o botão após a conclusão (sucesso ou erro)
                    salvarBtn.disabled = false;
                    salvarBtn.textContent = 'Salvar Documentos';
                    salvarBtn.classList.remove('disabled');
                }
            });

            // Carrega lista de funcionários
            function carregarFuncionarios() {
                funcionariosRef.on('value', snapshot => {
                    const funcionariosList = document.getElementById('funcionariosList');
                    funcionariosList.innerHTML = '';

                    snapshot.forEach(childSnapshot => {
                        const funcionario = childSnapshot.val();
                        const funcionarioId = childSnapshot.key;

                        // Determina quais documentos são obrigatórios para este funcionário específico
                        let documentosObrigatoriosParaContagem = [...DOCUMENTOS_OBRIGATORIOS_BASE];
                        if (funcionario.temDependentes === 'sim') {
                             documentosObrigatoriosParaContagem.push('certidaoFilhos', 'cpfDependentes', 'vacinaFilhos');
                        }
                        if (funcionario.operaMaquina === 'sim') {
                             documentosObrigatoriosParaContagem.push('cnh', 'certificadoCurso');
                        }


                        const docsEntregues = funcionario.documentos ?
                            Object.keys(funcionario.documentos).filter(docId => documentosObrigatoriosParaContagem.includes(docId) && funcionario.documentos[docId] && funcionario.documentos[docId].data).length : 0; // Verifica se o campo 'data' existe


                        const totalDocsObrigatorios = documentosObrigatoriosParaContagem.length;

                        const percentual = totalDocsObrigatorios > 0 ? Math.round(
                            (docsEntregues / totalDocsObrigatorios) * 100
                        ) : (totalDocsObrigatorios === 0 ? 100 : 0); // 100% se não houver obrigatórios, 0% se houver e nenhum enviado


                        const card = document.createElement('div');
                        card.className = 'funcionario-card';
                        card.innerHTML = `
                            <h3><i class="fas fa-user-circle"></i> ${funcionario.nome}</h3>
                            <p><i class="fas fa-id-card"></i> CPF: ${formatarCPF(funcionario.cpf)}</p>
                            <p><i class="fas fa-briefcase"></i> Cargo: ${formatarCargo(funcionario.cargo)}</p>
                            <p><i class="fas fa-cogs"></i> Opera Máquina: ${funcionario.operaMaquina === 'sim' ? 'Sim' : 'Não'}</p>
                            <p><i class="fas fa-child"></i> Dependentes: ${funcionario.temDependentes === 'sim' ? 'Sim' : 'Não'}</p>

                            <div class="progress-bar-container">
                                <p style="margin-bottom: 0.5rem; font-weight: bold; color: var(--dark-color);"><i class="fas fa-tasks"></i> Progresso dos Documentos:</p>
                                <div class="progress-bar">
                                    <div class="progress" style="width: ${percentual}%;"></div>
                                    <span data-percent="${percentual}%">${percentual}%</span>
                                </div>
                            </div>

                        `;

                        const verBtn = document.createElement('button');
                        verBtn.className = 'download-btn';
                        verBtn.innerHTML = '<i class="fas fa-eye"></i> Ver Documentos';
                        verBtn.addEventListener('click', () => {
                            currentFuncionarioId = funcionarioId;
                            document.getElementById('nomeFuncionario').innerHTML = `<i class="fas fa-folder"></i> Documentos de ${funcionario.nome}`;
                            mostrarDocumentosFuncionario(funcionario);
                            showPage('documentosFuncionario');
                        });

                        card.appendChild(verBtn);
                        funcionariosList.appendChild(card);
                    });
                });
            }

            // Configurar filtro de funcionários
            document.getElementById('filtroFuncionarios').addEventListener('input', function(e) {
                const filtro = e.target.value.toLowerCase();
                const cards = document.querySelectorAll('.funcionario-card');

                cards.forEach(card => {
                    const nome = card.querySelector('h3').textContent.toLowerCase();
                    card.style.display = nome.includes(filtro) ? 'flex' : 'none';
                });
            });

            // Mostra documentos de um funcionário específico
            function mostrarDocumentosFuncionario(funcionario) {
                const documentosContainer = document.getElementById('documentosContainer');
                documentosContainer.innerHTML = '';

                if (!funcionario.documentos || Object.keys(funcionario.documentos).length === 0) {
                    documentosContainer.innerHTML = '<p>Nenhum documento cadastrado para este funcionário.</p>';
                    return;
                }

                const categorias = {
                    'Pessoais': ['rg', 'cpfDoc', 'tituloEleitor', 'reservista'],
                    'Familiares': ['certidaoNascimento', 'certidaoFilhos', 'cpfDependentes', 'vacinaFilhos'],
                    'Residenciais': ['comprovanteResidencia'],
                    'Profissionais/Outros': ['pis', 'cnh', 'certificadoCurso', 'historicoEscolar', 'foto3x4', 'vacinaCovid']
                };

                for (const [categoria, docs] of Object.entries(categorias)) {
                    // Filtra os documentos que realmente existem para este funcionário
                    const docsExistentes = docs.filter(doc => funcionario.documentos && funcionario.documentos[doc] && funcionario.documentos[doc].data);

                    if (docsExistentes.length > 0) {
                        const categoriaElement = document.createElement('div');
                        categoriaElement.innerHTML = `<h3><i class="fas fa-folder-open"></i> ${categoria}</h3>`;
                        documentosContainer.appendChild(categoriaElement);

                        docsExistentes.forEach(docId => {
                            const docData = funcionario.documentos[docId];
                            const docElement = document.createElement('div');
                            docElement.className = 'documento-view';
                            docElement.innerHTML = `
                                <p><strong>${getDocumentName(docId)}</strong></p>
                                <p>Arquivo: ${docData.nome}</p>
                                <p>Tipo: ${docData.tipo || 'Desconhecido'}</p> <!-- Exibe o tipo MIME -->
                                <p>Tamanho: ${formatBytes(docData.tamanho)}</p>
                                <p>Data: ${new Date(docData.dataUpload).toLocaleDateString('pt-BR')}</p>
                                <!-- O link de download agora usa o Data URL -->
                                <a href="${docData.data}" download="${funcionario.nome.replace(/\s+/g, '_')}_${docId}_${docData.nome}" class="download-btn"><i class="fas fa-download"></i> Baixar Documento</a>
                            `;
                            documentosContainer.appendChild(docElement);
                        });
                    }
                }
            }

            // Controle de Pessoas - Adicionar nova pessoa
            document.getElementById('adicionarPessoaBtn').addEventListener('click', function() {
                const nomeInput = document.getElementById('novaPessoaNome');
                const cpfInput = document.getElementById('novaPessoaCPF');

                const nomes = nomeInput.value.trim().split(',').map(n => n.trim()).filter(n => n);
                const cpfs = cpfInput.value.trim().split(',').map(c => c.trim().replace(/\D/g, '')).filter(c => c);

                if (nomes.length === 0) {
                    showStatusMessage('Por favor, informe pelo menos um nome', 'error');
                    return;
                }

                if (cpfs.length > 0 && cpfs.length !== nomes.length) {
                    showStatusMessage('O número de CPFs deve corresponder ao número de nomes ou ser deixado em branco', 'error');
                    return;
                }

                nomes.forEach((nome, index) => {
                    const pessoaData = {
                        nome: nome,
                        dataCadastro: new Date().toISOString()
                    };

                    if (cpfs[index] && cpfs[index].length === 11) {
                        pessoaData.cpf = cpfs[index];
                    } else if (cpfs[index]) {
                        console.warn(`CPF "${cpfs[index]}" inválido (deve ter 11 dígitos). Será cadastrado sem CPF.`);
                        showStatusMessage(`CPF "${cpfs[index]}" inválido para "${nome}". Cadastrado sem CPF.`, 'error');
                    }

                    pessoasRef.push(pessoaData)
                        .catch(error => {
                            console.error('Erro ao cadastrar pessoa:', error);
                            showStatusMessage('Erro ao cadastrar pessoa: ' + error.message, 'error');
                        });
                });

                nomeInput.value = '';
                cpfInput.value = '';
                showStatusMessage('Pessoas adicionadas à lista de controle!', 'success');

            });

            // Configurar filtro de pessoas
            document.getElementById('filtroPessoas').addEventListener('input', function(e) {
                const filtro = e.target.value.toLowerCase();
                carregarListaPessoas(filtro);
            });

            // Carregar lista de pessoas com filtro
            function carregarListaPessoas(filtro = '') {
                pessoasRef.on('value', async function(snapshot) { // Usar async aqui
                    const listaPessoas = document.getElementById('listaPessoas');
                    listaPessoas.innerHTML = '';

                    let totalPessoas = 0;
                    let totalEnviados = 0;
                    let totalPendentes = 0;

                    const pessoasArray = [];
                    snapshot.forEach(childSnapshot => {
                         pessoasArray.push({ key: childSnapshot.key, val: childSnapshot.val() });
                    });

                    // Usar Promise.all para aguardar a verificação de documentos
                    const cards = await Promise.all(pessoasArray.map(async (pessoaEntry) => {
                         const pessoa = pessoaEntry.val;
                         const pessoaId = pessoaEntry.key;

                         if (filtro && !pessoa.nome.toLowerCase().includes(filtro)) {
                             return null; // Ignora se não corresponder ao filtro
                         }

                         totalPessoas++;

                         const card = document.createElement('div');
                         card.className = 'pessoa-card';
                         card.innerHTML = `
                             <h4><i class="fas fa-user-alt"></i> ${pessoa.nome}</h4>
                             ${pessoa.cpf ? `<p><i class="fas fa-id-card"></i> CPF: ${formatarCPF(pessoa.cpf)}</p>` : ''}
                             <p><i class="fas fa-calendar-alt"></i> Cadastrado em: ${formatarData(pessoa.dataCadastro)}</p>
                             <div class="pessoa-actions">
                                 <button class="btn-remover" data-id="${pessoaId}"><i class="fas fa-trash-alt"></i> Remover</button>
                             </div>
                         `;

                         const enviou = await verificarDocumentosEnviados(pessoa.nome, pessoa.cpf);

                         const statusElement = document.createElement('p');
                         statusElement.innerHTML = `Status: <span class="${enviou ? 'status-enviado' : 'status-pendente'}">${
                             enviou ? '<i class="fas fa-check-circle"></i> Documentos Enviados' : '<i class="fas fa-exclamation-triangle"></i> Documentos Pendentes'
                         }</span>`;

                         const nomeElement = card.querySelector('h4');
                         nomeElement.insertAdjacentElement('afterend', statusElement);

                         if (enviou) totalEnviados++;
                         else totalPendentes++;

                         return card; // Retorna o card para ser adicionado depois
                    }));

                    // Adiciona os cards filtrados e processados
                    cards.filter(card => card !== null).forEach(card => {
                        listaPessoas.appendChild(card);
                    });

                    // Atualiza o resumo após todos os cards serem processados
                    document.getElementById('totalPessoas').textContent = totalPessoas;
                    document.getElementById('totalEnviados').textContent = totalEnviados;
                    document.getElementById('totalPendentes').textContent = totalPendentes;

                    // Configura listeners para os botões de remover
                    document.querySelectorAll('.btn-remover').forEach(btn => {
                        btn.addEventListener('click', function() {
                            // Pega o nome do h4 dentro do card pai
                            const nomePessoa = btn.closest('.pessoa-card').querySelector('h4').textContent.replace('<i class="fas fa-user-alt"></i> ', '').trim();
                            if (confirm(`Tem certeza que deseja remover a pessoa "${nomePessoa}" da lista?`)) {
                                pessoasRef.child(btn.dataset.id).remove();
                            }
                        });
                    });
                });
            }

            // Verificar se documentos foram enviados (agora verifica se há dados Base64)
            async function verificarDocumentosEnviados(nome, cpf) {
                try {
                    const snapshot = await funcionariosRef.once('value');
                    let encontrouDocumentos = false;

                    snapshot.forEach(childSnapshot => {
                        const funcionario = childSnapshot.val();

                        // Verifica se o nome ou CPF correspondem
                        if (funcionario && (funcionario.nome.toLowerCase() === nome.toLowerCase() ||
                            (cpf && funcionario.cpf === cpf))) {

                             // Verifica se há documentos cadastrados para este funcionário
                             if (funcionario.documentos && Object.keys(funcionario.documentos).length > 0) {
                                 // Critério: Considera "enviado" se tiver pelo menos UM documento cadastrado.
                                 // Se o critério for ter TODOS os documentos obrigatórios, a lógica precisaria ser ajustada.
                                 encontrouDocumentos = true;
                                 return true; // Sai do loop forEach assim que encontrar um funcionário correspondente com documentos
                             }
                        }
                    });

                    return encontrouDocumentos;
                } catch (error) {
                    console.error('Erro ao verificar documentos:', error);
                    return false;
                }
            }

            // Funções auxiliares
            function formatarCPF(cpf) {
                if (!cpf) return '';
                cpf = String(cpf).padStart(11, '0');
                // Adiciona máscara somente se o CPF tiver 11 dígitos
                if (cpf.length === 11) {
                    return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
                }
                 return cpf; // Retorna sem máscara se não tiver 11 dígitos
            }

            function formatarData(dataString) {
                 if (!dataString) return 'N/A';
                const data = new Date(dataString);
                if (isNaN(data.getTime())) {
                    return 'Data inválida';
                }
                return data.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
            }

            function formatarCargo(cargoKey) {
                 const cargos = {
                    'assistente_logistica': 'Assistente de Logística',
                    'auxiliar_expedicao': 'Auxiliar de Expedição',
                    'auxiliar_logistica_1': 'Auxiliar de Logística 1',
                    'conferente_expedicao': 'Conferente de Expedição',
                    'conferente_1': 'Conferente 1',
                    'encarregado_logistica': 'Encarregado Logística',
                    'mototrista_caminhao_1': 'Mototrista de Caminhão 1',
                    'operador_empilhadeira_2': 'Operador de Empilhadeira 2',
                    'operador_empilhadeira_3': 'Operador de Empilhadeira 3',
                    'operador_logistico': 'Operador Logístico',
                    'operador_maquina_1': 'Operador de Máquina 1',
                    'tecnico_seguranca_trabalho_pl': 'Técnico de Segurança do Trabalho Pl'
                 };
                 // Tenta encontrar no mapa, se não encontrar, formata a string da chave
                 return cargos[cargoKey] || cargoKey.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            }

            function fileParaBase64(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.readAsDataURL(file); // Lê o arquivo como Data URL (Base64)
                    reader.onload = () => resolve(reader.result);
                    reader.onerror = error => reject(error);
                });
            }

            function formatBytes(bytes, decimals = 2) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const dm = decimals < 0 ? 0 : decimals;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
            }

            function getDocumentName(docId) {
                const names = {
                    'rg': 'RG',
                    'cpfDoc': 'CPF (Documento)',
                    'tituloEleitor': 'Título de Eleitor',
                    'reservista': 'Certidão de Reservista',
                    'certidaoNascimento': 'Certidão de Nascimento/Casamento',
                    'certidaoFilhos': 'Certidão de Nascimento dos Filhos',
                    'cpfDependentes': 'CPF dos Dependentes',
                    'vacinaFilhos': 'Carteira de Vacinação dos Filhos',
                    'comprovanteResidencia': 'Comprovante de Residência',
                    'foto3x4': 'Foto 3x4',
                    'cnh': 'CNH',
                    'certificadoCurso': 'Certificado de Curso Específico',
                    'pis': 'Cartão do PIS',
                    'historicoEscolar': 'Histórico Escolar',
                    'vacinaCovid': 'Comprovante de Vacina - COVID-19'
                };
                return names[docId] || docId;
            }

            // Verifica autenticação
            auth.onAuthStateChanged(user => {
                if (user) {
                    document.getElementById('loginContainer').style.display = 'none';
                    document.getElementById('appContainer').style.display = 'flex';
                    showPage('cadastro'); // Ou a página inicial desejada após o login
                    carregarFuncionarios();
                    carregarListaPessoas();
                } else {
                     document.getElementById('loginContainer').style.display = 'flex';
                     document.getElementById('appContainer').style.display = 'none';
                }
            });

            // Inicializar seções e campos condicionais
            document.addEventListener('DOMContentLoaded', function() {
                // Inicializa o estado dos campos condicionais (dependendo do valor inicial dos selects)
                atualizarCamposCondicionais();

                 // Garante que todas as seções de conteúdo comecem fechadas
                 document.querySelectorAll('.section-content').forEach(section => {
                     const title = section.previousElementSibling;
                     const arrow = title.querySelector('i');

                     section.style.maxHeight = '0';
                     section.style.paddingTop = '0';
                     section.style.paddingBottom = '0';
                     section.classList.remove('expanded'); // Remove a classe expanded caso esteja no HTML
                     title.classList.remove('expanded');
                     arrow.classList.remove('fa-chevron-up');
                     arrow.classList.add('fa-chevron-down');
                 });

            });

            // Adiciona máscara simples para CPF (somente números)
             document.getElementById('cpf').addEventListener('input', function (e) {
                 e.target.value = e.target.value.replace(/\D/g, '');
             });

             document.getElementById('novaPessoaCPF').addEventListener('input', function (e) {
                 e.target.value = e.target.value.replace(/[^0-9,]/g, ''); // Permite números e vírgula
             });


        </script>
    </body>
    </html>